# 3. 역할(role), 책임(responsibility), 협력(collaboration)

*이텔릭체는 스터디 구성원들의 경험과 의견을 의미한다*
**볼드체는 책의 강조된 내용을 의미한다**

- 서문
    - 상속은 코드 재사용의 가장 널리 알려진 방법이지만 캡슐화 측면에서는 합성이 낫다
    - 유연한 객체지향 프로그래밍에서는 컴파일 타임 의존성과 실행 시간 의존성이 달라야 한다
    - 하지만 클래스, 상속, 지연바인딩이 객체지향의 핵심은 아니다
    - 가장 중요한 것은 역할, 책임, 협력 이다 

- 정의
    - 협력(Role) : 객체들이 기능을 구현하기 위해 수행하는 상호작용
    - 책임(Responsibility) : 객체가 협력에 참여하기 위해 수행하는 로직
    - 역할(Collaboration) : 협력안에서 수행하는 책임들이 모여 객체가 수행하는 역할을 구성

- 협력(Role)
     - 객체는 고립적인 존재가 아닌 다른 객체와 협력하는 사회적인 존재다
        - *우리는 객체를 설계할 때 협력을 고려하지 않고 있었고, 이를 고려하는 것이 굉장히 어렵다고 공감하였다*
        - *이를 어렵게 하는 이유중 하나는 협력관계를 고려하지 않고 기능에 집중하기 때문이다* 
        - *어떤 객체를 수정하여야할때 해당 객체에게 요청하는 객체가 무엇인지 일일이 찾아봐야하는 상황을 경험한 적이 있고*
        - *이는 협력을 고려하지 않은 설계 때문에 발생한 것이라고 생각하였다*
        - *만약 책의 내용대로 협력을 고려했다면 누구와 협력하고 있는지(누가 사용하고 있는지)도 고려되어 있었을 것이다*
     
     - "협력은 한 객체가 다른 객체에게 무언가를 요청하는 것" (Wirfs-Brock03)
     - 요청을 받은 객체는 요청을 어떻게 처리할지 **스스로** 결정한다 
     - "어떤 객체가 필요하다면 그 이유는 오로지 해당 객체가 어떤 협력에 참여하고 있기 때문" (Beck89)
     - 따라서 협력이 객체의 행동을 결정하고, 행동은 상태를 결정한다
        - *우리는 이 상태를 행동에 필요한 무언가(데이터,...) 와 같은 의미 라고 여겼다* 
     - 즉, 협력은 설계를 위한 문맥을 결정한다
      
- 책임(Responsibility)
    - 객체에 의해 정의되는 응집도 있는 행위의 집합
    - 객체가 유지해야하는 정보와 수행 할 수 있는 정보에 대해 개략적으로 서술한 문장이다
    - "Responsibility = Knowing + Doing" (Craig Larman)
    - 따라서 협력안에서 할당된 객체의 책임이 외부의 인터페이스와 내부의 속성을 결정한다 
    - 책임과 메시지는 다르다
        - 책임은 객체가 수행할 수 있는 행동을 추상적으로 표현 한 것이지만 
        - 메시지는 객체가 수행 할 수 있는 구체적이고 실질적인 요청이다  
    - **"객체지향에서 가장 중요한 것은 책임을 능숙하게 할당하는 것" (Craig Larman)**
    - 협력은 어떤 객체에게 어떤 책임을 할당 할지 결정 할 수 있는 문맥을 제공한다  
    - CRC 카드 
        - 후보(Candidate), 책임(Responsibility), 협력(Collaboration) 를 카드 형태로 나타낸 것
    - 어떤 객체에게 책임을 할당 할 것인가 (방법론)
        - Information Pattern (정보 전문가 패턴): 필요한 정보를 가장 많이 알고 있는 개체에게 할당하는 방법
            - 상태와 행동을 함께가지는 자율적인 객체를 만들 가능성이 높아진다 
            - *거의 대부분의 책임을 정보에 의해 결정해왔던 것 같다*
    - RDD (Responsibility Driven Development)
        - 책임을 수행할 적절한 객체를 찾아 협력을 설계하는 방법론 
    - 책임 할당 시 고려해야하는 두가지
        - **메시지가 객체를 결정한다** , 즉 객체가 메시지를 선택하는 것이 아니라 메시지가 객체를 선택한다
            - 객체가 최소한의 인터페이스만을 가지게 된다
            - 객체가 충분히 추상적인 인터페이스 가질 수 있다
        - **행동이 상태를 결정한다**
            - 객체의 행동은 객체가 협력에 참여할 수 있는 유일한 방법이다 
   
- 역할(Collaboration)
    - 객체의 목적은 협력안에서 객체가 맡게되는 책임의 집합으로 표시된다 
        - *보통 하나의 객체는 하나의 역하만 짜도록 설계했던거 같다*
        - *배우와 배역 예시가 실제로 가능할까 라는 의문 (제네럴의 끝판왕인 프레임 워크 레벨에서는 본것 같다)*
    - 역할을 구현하는 가장 일반적인 방법은 추상클래스와 인터페이스 이다 
    - 역할은 객체가 참여 할 수 있는 일종의 슬롯이다 
    - 협력안에서 특정 책임을 수행할 수 있는 대상이 하나라면 객체이고 여러개이면 역할이다 